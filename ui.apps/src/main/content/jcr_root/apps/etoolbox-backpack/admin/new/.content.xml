<?xml version="1.0" encoding="UTF-8"?>
<jcr:root xmlns:jcr="http://www.jcp.org/jcr/1.0" xmlns:cq="http://www.day.com/jcr/cq/1.0"
          xmlns:granite="http://www.adobe.com/jcr/granite/1.0"
          xmlns:sling="http://sling.apache.org/jcr/sling/1.0"
          xmlns:nt="http://www.jcp.org/jcr/nt/1.0"
          jcr:primaryType="cq:Page">
    <jcr:content
            jcr:primaryType="nt:unstructured"
            jcr:title="New package"
            sling:resourceType="granite/ui/components/shell/collectionpage"
            targetCollection=".package-list">
        <head jcr:primaryType="nt:unstructured">
            <clientlibs
                    jcr:primaryType="nt:unstructured"
                    sling:resourceType="granite/ui/components/coral/foundation/includeclientlibs"
                    categories="[cq.common.wcm,backpack.new-ui]"/>
        </head>
        <views jcr:primaryType="nt:unstructured">
            <stack
                    jcr:primaryType="nt:unstructured"
                    sling:resourceType="granite/ui/components/foundation/container">
                <items jcr:primaryType="nt:unstructured">
                    <list
                            jcr:primaryType="nt:unstructured"
                            sling:resourceType="granite/ui/components/foundation/container"
                            granite:class="package-list stub-collection"
                            foundation-selections-mode="single">
                        <datasource
                                jcr:primaryType="nt:unstructured"
                                sling:resourceType="/apps/etoolbox-backpack/admin/new/list/datasource"
                                itemResourceType="/apps/etoolbox-backpack/admin/new/list/item"/>
                        <layout jcr:primaryType="nt:unstructured"
                                sling:resourceType = "granite/ui/components/foundation/layouts/listview"
                                itemprop="item"
                                layoutId="list"
                                maximized="{Boolean}true"/>
                    </list>
                    <status
                            jcr:primaryType="nt:unstructured"
                            sling:resourceType="/apps/etoolbox-backpack/admin/new/statusbar"/>
                </items>
            </stack>
        </views>
        <actions jcr:primaryType="nt:unstructured">
            <primary jcr:primaryType="nt:unstructured">
                <add
                        jcr:primaryType="nt:unstructured"
                        sling:resourceType="granite/ui/components/coral/foundation/pulldown"
                        icon="addCircle"
                        text="Add"
                        variant="primary">
                    <items jcr:primaryType="nt:unstructured">
                        <path
                                jcr:primaryType="nt:unstructured"
                                sling:resourceType="granite/ui/components/coral/foundation/collection/actionlink"
                                action="foundation.dialog"
                                target=".package-list"
                                text="Path...">
                            <data jcr:primaryType="nt:unstructured"
                                  nesting="hide"
                                  src.uritemplate="/mnt/overlay/etoolbox-backpack/admin/new/addPath.html"/>
                        </path>
                        <query
                                jcr:primaryType="nt:unstructured"
                                sling:resourceType="granite/ui/components/coral/foundation/collection/actionlink"
                                action="foundation.dialog"
                                text="Query...">
                            <data jcr:primaryType="nt:unstructured"
                                  nesting="hide"
                                  src.uritemplate="/mnt/overlay/etoolbox-backpack/admin/new/addQuery.html"/>
                        </query>
                        <list
                                jcr:primaryType="nt:unstructured"
                                sling:resourceType="granite/ui/components/coral/foundation/collection/actionlink"
                                action="foundation.dialog"
                                text="List...">
                            <data jcr:primaryType="nt:unstructured"
                                  nesting="hide"
                                  src.uritemplate="/mnt/overlay/etoolbox-backpack/admin/new/addList.html"/>
                        </list>
                    </items>
                </add>
                <edit
                        jcr:primaryType="nt:unstructured"
                        sling:resourceType="granite/ui/components/coral/foundation/collection/actionlink"
                        granite:class="coral3-Button coral3-Button--secondary"
                        action="foundation.dialog"
                        text="Edit"
                        variant="secondary">
                    <data jcr:primaryType="nt:unstructured"
                          nesting="hide"
                          src.uritemplate="/mnt/overlay/etoolbox-backpack/admin/new/editProperties.html{+id}"/>
                </edit>
                <excludeChildren
                        jcr:primaryType="nt:unstructured"
                        sling:resourceType="granite/ui/components/coral/foundation/collection/action"
                        granite:class="selection-action foundation-collection-action-hidden"
                        activeCondition="backpack.package.selection.hasChildren"
                        target=".package-list"
                        icon="pagesExclude"
                        text="Exclude Children"
                        variant="actionBar"/>
                <includeChildren
                        jcr:primaryType="nt:unstructured"
                        sling:resourceType="granite/ui/components/coral/foundation/collection/action"
                        granite:class="selection-action foundation-collection-action-hidden"
                        activeCondition="backpack.package.selection.noChildren"
                        target=".package-list"
                        icon="pages"
                        text="Include Children"
                        variant="actionBar"/>
                <liveCopies
                        jcr:primaryType="nt:unstructured"
                        sling:resourceType="granite/ui/components/coral/foundation/collection/action"
                        granite:class="selection-action foundation-collection-action-hidden"
                        activeCondition="backpack.package.selection.isPrimary"
                        target=".package-list"
                        icon="multiple"
                        text="Add Live Copies"
                        variant="actionBar"/>
                <references
                        jcr:primaryType="nt:unstructured"
                        sling:resourceType="granite/ui/components/coral/foundation/pulldown"
                        granite:class="selection-action selection-pulldown foundation-collection-action-hidden"
                        activeCondition="backpack.package.selection.isPrimary"
                        icon="gears"
                        text="Add References"
                        variant="actionBar">
                    <items jcr:primaryType="nt:unstructured">
                        <images
                                jcr:primaryType="nt:unstructured"
                                sling:resourceType="granite/ui/components/coral/foundation/collection/actionlink"
                                text="Images"/>
                        <assets
                                jcr:primaryType="nt:unstructured"
                                sling:resourceType="granite/ui/components/coral/foundation/collection/actionlink"
                                text="Assets"/>
                        <tags
                                jcr:primaryType="nt:unstructured"
                                sling:resourceType="granite/ui/components/coral/foundation/collection/actionlink"
                                text="Tags"/>
                    </items>
                </references>
                <delete
                        jcr:primaryType="nt:unstructured"
                        sling:resourceType="granite/ui/components/coral/foundation/collection/action"
                        granite:class="selection-action foundation-collection-action-hidden"
                        activeCondition="backpack.package.selection"
                        target=".package-list"
                        icon="delete"
                        text="Delete"
                        variant="actionBar"/>
            </primary>
            <secondary jcr:primaryType="nt:unstructured">
                <test
                        jcr:primaryType="nt:unstructured"
                        sling:resourceType="granite/ui/components/coral/foundation/anchorbutton"
                        text="Test build"
                        variant="secondary"/>
                <download
                        jcr:primaryType="nt:unstructured"
                        sling:resourceType="granite/ui/components/coral/foundation/anchorbutton"
                        granite:class="split-start"
                        text="Build / Download"
                        variant="primary"/>
                <buildVariants
                        jcr:primaryType="nt:unstructured"
                        sling:resourceType="granite/ui/components/coral/foundation/pulldown"
                        granite:class="split-end"
                        icon="triangleDown"
                        variant="primary">
                    <items jcr:primaryType="nt:unstructured">
                        <onlyBuild
                                jcr:primaryType="nt:unstructured"
                                sling:resourceType="granite/ui/components/coral/foundation/collection/actionlink"
                                action="foundation.dialog"
                                text="Only build"/>
                        <onlyDownload
                                jcr:primaryType="nt:unstructured"
                                sling:resourceType="granite/ui/components/coral/foundation/collection/actionlink"
                                action="foundation.dialog"
                                text="Download (without building)"/>
                    </items>
                </buildVariants>
                <install
                        jcr:primaryType="nt:unstructured"
                        sling:resourceType="granite/ui/components/coral/foundation/anchorbutton"
                        text="Install"
                        variant="secondary"/>
            </secondary>
        </actions>
    </jcr:content>

    <addPath
            jcr:primaryType="nt:unstructured"
            jcr:title="Add Path"
            sling:resourceType="granite/ui/components/coral/foundation/dialog"
            granite:class="modal-form">
        <items jcr:primaryType="nt:unstructured">
            <form jcr:primaryType="nt:unstructured"
                  sling:resourceType="granite/ui/components/coral/foundation/form"
                  action="/services/backpack/add/path"
                  foundationForm="{Boolean}true"
                  method="post"
                  style="vertical">
                <items jcr:primaryType="nt:unstructured">
                    <content jcr:primaryType="nt:unstructured"
                             jcr:title="Add Path"
                             sling:resourceType="granite/ui/components/coral/foundation/fixedcolumns">
                        <items jcr:primaryType="nt:unstructured">
                            <column jcr:primaryType="nt:unstructured"
                                    sling:resourceType="granite/ui/components/coral/foundation/container">
                                <items jcr:primaryType="nt:unstructured">
                                    <path
                                            jcr:primaryType="nt:unstructured"
                                            sling:resourceType="granite/ui/components/coral/foundation/form/pathfield"
                                            name="path"
                                            fieldLabel="Path"
                                            required="{Boolean}true">
                                    </path>
                                    <okButton
                                            jcr:primaryType="nt:unstructured"
                                            sling:resourceType="granite/ui/components/coral/foundation/button"
                                            text="Submit"
                                            type="submit"
                                            variant="primary"
                                            granite:class="foundation-ui-notification coral-Form-fieldwrapper"/>
                                </items>
                            </column>
                        </items>
                    </content>
                </items>
            </form>
        </items>
    </addPath>

    <addQuery
            jcr:primaryType="nt:unstructured"
            jcr:title="Add by Query"
            sling:resourceType="granite/ui/components/coral/foundation/dialog"
            granite:class="modal-form">
        <items jcr:primaryType="nt:unstructured">
            <form jcr:primaryType="nt:unstructured"
                  sling:resourceType="granite/ui/components/coral/foundation/form"
                  action="/services/backpack/add/query"
                  foundationForm="{Boolean}true"
                  method="post"
                  style="vertical">
                <items jcr:primaryType="nt:unstructured">
                    <content jcr:primaryType="nt:unstructured"
                             jcr:title="Add by Query"
                             sling:resourceType="granite/ui/components/coral/foundation/fixedcolumns">
                        <items jcr:primaryType="nt:unstructured">
                            <column jcr:primaryType="nt:unstructured"
                                    sling:resourceType="granite/ui/components/coral/foundation/container">
                                <items jcr:primaryType="nt:unstructured">
                                    <query
                                            jcr:primaryType="nt:unstructured"
                                            sling:resourceType="granite/ui/components/coral/foundation/form/textarea"
                                            name="query"
                                            fieldLabel="Query (in JCR-SQL2 format)"
                                            required="{Boolean}true"
                                            rows="{Long}10"/>
                                    <okButton
                                            jcr:primaryType="nt:unstructured"
                                            sling:resourceType="granite/ui/components/coral/foundation/button"
                                            text="Submit"
                                            type="submit"
                                            variant="primary"
                                            granite:class="foundation-ui-notification coral-Form-fieldwrapper"/>
                                </items>
                            </column>
                        </items>
                    </content>
                </items>
            </form>
        </items>
    </addQuery>

    <addList
            jcr:primaryType="nt:unstructured"
            jcr:title="Add by List"
            sling:resourceType="granite/ui/components/coral/foundation/dialog"
            granite:class="modal-form">
        <items jcr:primaryType="nt:unstructured">
            <form jcr:primaryType="nt:unstructured"
                  sling:resourceType="granite/ui/components/coral/foundation/form"
                  action="/services/backpack/add/list"
                  foundationForm="{Boolean}true"
                  method="post"
                  style="vertical">
                <items jcr:primaryType="nt:unstructured">
                    <content jcr:primaryType="nt:unstructured"
                             jcr:title="Add by List"
                             sling:resourceType="granite/ui/components/coral/foundation/fixedcolumns">
                        <items jcr:primaryType="nt:unstructured">
                            <column jcr:primaryType="nt:unstructured"
                                    sling:resourceType="granite/ui/components/coral/foundation/container">
                                <items jcr:primaryType="nt:unstructured">
                                    <list
                                            jcr:primaryType="nt:unstructured"
                                            sling:resourceType="granite/ui/components/coral/foundation/form/textarea"
                                            name="query"
                                            fieldLabel="List"
                                            required="{Boolean}true"
                                            rows="{Long}10"/>
                                    <okButton
                                            jcr:primaryType="nt:unstructured"
                                            sling:resourceType="granite/ui/components/coral/foundation/button"
                                            text="Submit"
                                            type="submit"
                                            variant="primary"
                                            granite:class="foundation-ui-notification coral-Form-fieldwrapper"/>
                                </items>
                            </column>
                        </items>
                    </content>
                </items>
            </form>
        </items>
    </addList>

    <editProperties
            jcr:primaryType="nt:unstructured"
            jcr:title="Package Properties"
            sling:resourceType="granite/ui/components/coral/foundation/dialog"
            granite:class="modal-form">
        <items jcr:primaryType="nt:unstructured">
            <form jcr:primaryType="nt:unstructured"
                  sling:resourceType="granite/ui/components/coral/foundation/form"
                  action="/services/backpack/addPath"
                  foundationForm="{Boolean}true"
                  method="post"
                  style="vertical">
                <items jcr:primaryType="nt:unstructured">
                    <content jcr:primaryType="nt:unstructured"
                             jcr:title="Package Properties"
                             sling:resourceType="granite/ui/components/coral/foundation/fixedcolumns">
                        <items jcr:primaryType="nt:unstructured">
                            <column jcr:primaryType="nt:unstructured"
                                    sling:resourceType="granite/ui/components/coral/foundation/container">
                                <items jcr:primaryType="nt:unstructured">
                                    <name
                                            jcr:primaryType="nt:unstructured"
                                            sling:resourceType="granite/ui/components/coral/foundation/form/textfield"
                                            name="name"
                                            fieldLabel="Name"
                                            emptyText="New Package"
                                            required="{Boolean}true"/>
                                    <group
                                            jcr:primaryType="nt:unstructured"
                                            sling:resourceType="granite/ui/components/coral/foundation/form/textfield"
                                            name="group"
                                            fieldLabel="Group"
                                            emptyText="BackPack"/>
                                    <version
                                            jcr:primaryType="nt:unstructured"
                                            sling:resourceType="granite/ui/components/coral/foundation/form/textfield"
                                            name="version"
                                            fieldLabel="Version"
                                            emptyText="1.0"/>
                                    <thumbnail
                                            jcr:primaryType="nt:unstructured"
                                            sling:resourceType="granite/ui/components/coral/foundation/form/pathfield"
                                            name="thumbnail"
                                            fieldLabel="Thumbnail Path"/>
                                    <okButton
                                            jcr:primaryType="nt:unstructured"
                                            sling:resourceType="granite/ui/components/coral/foundation/button"
                                            text="Save"
                                            type="submit"
                                            variant="primary"
                                            granite:class="foundation-ui-notification coral-Form-fieldwrapper"/>
                                </items>
                            </column>
                        </items>
                    </content>
                </items>
            </form>
        </items>
    </editProperties>

</jcr:root>
